<div id=D__ID module=app>
    <!-- special font, css etc for this app -->
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Nunito|Nunito+Sans|Roboto+Slab' />
    <!-------->
    <script main-code>
        //------------------------------------
        $vm.api_address="https://api.wappsystem.com";
        if(window.location.toString().indexOf('_p=1')!=-1) $vm.api_address="https://api.wappsystem.com:3000";
        //------------------------------------
        $vm.default_title="Modular distributed web application";
        //------------------------------------
        var set_layout=function(){
            var header_height=$('#header').outerHeight(); $vm.header_height=header_height;
            var footer_height=$('#footer').outerHeight(); $vm.footer_height=footer_height;
            $vm.min_height=($(window).height()-header_height-footer_height);
            console.log(header_height)
            console.log(footer_height)
            $('#content').css('min-height',$vm.min_height);
            /*
            if($vm.active_id!=undefined){
                $('#D'+$vm.active_id).css('min-height',($('body').height()-$('#header').outerHeight()-$('#footer').outerHeight())+"px");
                $('#scroll').css('height',($('body').height()-$('#header').outerHeight())+"px");
            }
            */
        }
        //------------------------------------
        set_layout();
        //-----------------------------------------
        $vm.show=function(m_name){
            document.title=$vm.default_title;
            $("meta[name='description']").attr("content", "A single page application with shared reusable modules distributed on different static web servers around the world and maintained by different people with different skills!");
            $("body").removeClass();
            $("body").addClass('body_background_default');
            
            $vm.active_id=undefined;
            if(m_name!=undefined) $vm.active_id=$vm.module_list[m_name].id;
            if(m_name!=undefined && $vm.module_list[m_name].show!=undefined) $vm.module_list[m_name].show();
            if($vm.active_id!=undefined){
                $('#D'+$vm.active_id).css('height','unset');
                $('#D'+$vm.active_id).css('min-height',($('body').height()-$('#header').outerHeight()-$('#footer').outerHeight())+"px");
                $('#D'+$vm.active_id).css('overflow','unset');
                $('#D'+$vm.active_id).css('overflow-x','auto');
                $('#scroll').css('height',($('body').height()-$('#header').outerHeight())+"px");
                $('#scroll').css('overflow-y','auto');
                if(m_name=='home') $('#D'+$vm.active_id).css('height',($('body').height()-$('#header').outerHeight()-$('#footer').outerHeight())+"px");
            }
        }
        //------------------------------------
        $vm.show('home');
        window.onresize=function(){set_layout();}
        //------------------------------------
        $vm.init(function(){
            $vm.init_status=1;
            $vm.show_user();
        })
        //------------------------------------
    </script>
    <style main-style>
        html,body{ margin:0; padding:0; height:100%; font-family:Arial;}
        body{background-size: cover; background-repeat: repeat-x; background-position: center top; background-attachment: fixed;}
        .body_background_default{ background-image: url(https://image.vmiis.com/bk003.jpg);}
    </style>
</div>
